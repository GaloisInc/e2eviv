% The OVF E2E VIV Report

% Turning off "draft" mode on the report class turns off to do notes,
% chapter assignments, and completion percentages
\documentclass[draft]{report}

\usepackage{times}

\usepackage{ifpdf}
\usepackage{ifdraft}
\usepackage[utf8]{inputenc}
\usepackage{fnpct}
\usepackage{xcolor}
\usepackage[final]{graphicx} % always include images, even in draft mode
\usepackage{xspace}
\usepackage{colortbl}
\usepackage{longtable}
\usepackage{tabu}
\usepackage[inline]{enumitem}
\usepackage[final]{listings} % always include listings, even in draft mode

% Bibliography equipment for fancier citations of websites etc
\usepackage[%
  backend=bibtex      % biber or bibtex
%,style=authoryear    % Alphabeticalsch
 ,style=numeric-comp  % numerical-compressed
%,sorting=none        % no sorting
 ,sortcites=true      % some other example options ...
 ,block=none
 ,indexing=false
 ,citereset=none
 ,isbn=true
 ,url=true
 ,doi=true            % prints doi
 ,natbib=true         % if you need natbib functions
]{biblatex}
\addbibresource{bibliography.bib}

\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}

% BON listing style
\include{style/bon}
\lstset{style=bon, columns=fullflexible, keepspaces=true, frame=lines,
  captionpos=b, numbers=none} 

% custom colors
\colorlet{darkgreen}{green!35!black}
\colorlet{darkred}{red!45!black}

% shades of red and green that are distinguishable even with the most common
% kinds of color blindness
\colorlet{accessiblegreen}{green!55!black!70!blue!40!white}
\colorlet{accessiblered}{red!80!black!80!yellow!30!white}

\usepackage[margin=1in]{geometry}
\usepackage[defaultlines=4,all]{nowidow}
\usepackage[parfill]{parskip}

%% To Do Notes
\usepackage[obeyDraft, colorinlistoftodos, textwidth=\marginparwidth]{todonotes}

% individual colors for To Dos, feel free to change yours
\colorlet{tododmz}{green!50}
\colorlet{todokiniry}{red!50}
\colorlet{tododmwit}{orange!50}
\colorlet{todojkr}{blue!50}
\colorlet{todoprobinson}{purple!50}
\colorlet{todoacf}{cyan!50}
\colorlet{todogeneric}{yellow!50}

\newcounter{todocounter}
\newcommand{\todocount}[2][]{\stepcounter{todocounter}\todo[#1]{\thetodocounter:
    #2}}

% individual commands for To Dos
% usage: \todo<username>{Something to do.}
\newcommand{\tododmz}[1]{\todocount[color=tododmz]{#1}}
\newcommand{\todokiniry}[1]{\todocount[color=todokiniry]{#1}}
\newcommand{\tododmwit}[1]{\todocount[color=tododmwit]{#1}}
\newcommand{\todojkr}[1]{\todocount[color=todojkr]{#1}}
\newcommand{\todoprobinson}[1]{\todocount[color=todoprobinson]{#1}}
\newcommand{\todoacf}[1]{\todocount[color=todoacf]{#1}}
\newcommand{\todogeneric}[1]{\todocount[color=todogeneric]{#1}}

\ifpdf
\usepackage[draft=false,pdftex,colorlinks=true,urlcolor=blue,linkcolor=darkred,citecolor=darkgreen,bookmarks=false]{hyperref}
\else
\usepackage[dvips]{hyperref}
\fi


% define a macro \Autoref to allow multiple references to be passed to
% \autoref
\makeatletter
\newcommand\Autoref[1]{\@first@ref#1,@}
\def\@throw@dot#1.#2@{#1}% discard everything after the dot
\def\@set@refname#1{%    % set \@refname to autoefname+s using \getrefbykeydefault
    \edef\@tmp{\getrefbykeydefault{#1}{anchor}{}}%
    \def\@refname{\@nameuse{\expandafter\@throw@dot\@tmp.@autorefname}s}%
}
\def\@first@ref#1,#2{%
  \ifx#2@\autoref{#1}\let\@nextref\@gobble% only one ref, revert to normal \autoref
  \else%
    \@set@refname{#1}%  set \@refname to autoref name
    \@refname~\ref{#1}% add autoefname and first reference
    \let\@nextref\@next@ref% push processing to \@next@ref
  \fi%
  \@nextref#2%
}
\def\@next@ref#1,#2{%
   \ifx#2@ and~\ref{#1}\let\@nextref\@gobble% at end: print and+\ref and stop
   \else, \ref{#1}% print  ,+\ref and continue
   \fi%
   \@nextref#2%
}
\makeatother

\usepackage{lipsum}
\usepackage{soul}

% Modify the autoref names to be capitalized and not sub-sub-subby.
\renewcommand*{\chapterautorefname}{Chapter}
\renewcommand*{\sectionautorefname}{Section}
\renewcommand*{\subsectionautorefname}{Section}
\renewcommand*{\subsubsectionautorefname}{Section}

% Various definitions, from Aggelos E2E spec

\newcommand{\func}[1][\relax]{\ensuremath{\mathcal{F}_{\mathsf{#1}}}}
\newcommand{\fl}[1]{\mbox{\( \lfloor #1 \rfloor \)}}
\newcommand{\pair}[2]{\mbox{\(\langle #1,#2 \rangle\)}}

\newcommand{\mc}{\mathcal}
\newcommand{\Pro}{\mbox{\( \mathbf{ Prob } \)}}

\def\squareforqed{\hbox{\(\blacksquare\)}}
\def\qed{\ifmmode\squareforqed\else{\unskip\nobreak\hfill\penalty50\hskip1em\null\nobreak\hfil\squareforqed\parfillskip=0pt\finalhyphendemerits=0\endgraf}\fi}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{assumption}{Complexity Assumption}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{remark}{Remark}
\newtheorem{claim}{Claim}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newenvironment{proof}{\noindent {\em Proof.}}{\medskip}

\def\PPT{{\rm PPT} }
\def\ff{\mathbb{F}}
\def\sbs{\subseteq}
\def\zz{\mathbb{Z}}
\def\E{\mathsf{E}}

%Functionalities
\newcommand{\fete}{\func[e2e]}%
\newcommand{\fbb}{\func[bb]}%
\newcommand{\fsauth}{\func[sauth]}%
\newcommand{\fauth}{\func[auth]}%
\newcommand{\fmail}{\func[mail]}%
\newcommand{\frnd}{\func[rnd]}%

%Parties
\def\EA{\mathsf{EA}}
\def\VT{\mathsf{V}}
\def\RB{\mathsf{RB}}
\def\VC{\mathsf{VC}}
\def\AU{\mathsf{AU}}

\def\Exec{\mathsf{Exec}}


%Commands
\def\Create{\mathtt{Create}}
\def\Sample{\mathtt{Sample}}
\def\FakeBallot{\mathtt{FakeBallot}}
\def\Deliver{\mathtt{Deliver}}
\def\Corrupt{\mathtt{Corrupt}}
\def\Verify{\mathtt{Verify}}
\def\Tally{\mathtt{Tally}}
\def\Vote{\mathtt{Vote}}
\def\RecordVote{\mathtt{RecordVote}}
\def\Append{\mathtt{Append}}
\def\Read{\mathtt{Read}}
\def\Send{\mathtt{Send}}
\def\Mail{\mathtt{Mail}}
\def\Audit{\mathtt{Audit}}
\def\VBB{\mathtt{VBB}}
\def\SendInit{\mathtt{SendInit}}
\def\GetRnd{\mathtt{GetRnd}}
\def\Select{\mathtt{Select}}
\def\RecordTally{\mathtt{RecordTally}}
\def\ReadTally{\mathtt{ReadTally}}
\def\Receipt{\mathtt{Receipt}}
\def\Result{\mathtt{Result}}
\def\ElectionFail{\mathtt{ElectionFail}}

% End of preamble

\title{The E2EVIV Report}
\author{Many People}

\begin{document}

% The title page has no visible page number, and the report resets page
% numbering on the next page so that the visible page numbers start from 1.
% One unfortunate side effect of this is that hyperref sees two different
% pages both named "1" and gets confused. See also
% http://tex.stackexchange.com/q/18924/16779
\hypersetup{pageanchor=false}
\maketitle
\hypersetup{pageanchor=true}

\tableofcontents

\clearpage
\ifdraft{\addcontentsline{toc}{chapter}{\ \ \ \ \hl{Note: Names following
    chapter titles are the currently-assigned writers; percentages
    following writer names are very rough estimates of the
    approximate percentage of completion. Some material factored 
    into the percentages may not yet appear in the generated report 
    because it needs to be brought in from external sources.} \\ \ \\
  List of To Do Items}
% temporarily here, so we have a centralized list of all the todo
% items in the document
\listoftodos[List of To Do Items]
}{}
\input{executive_summary} % Joe K./Susan
\input{introduction} % Joe K./Susan
\input{remote_voting} % Philip
\input{e2e_viv_explained} % Philip/Daniel
\input{required_properties} % Dan
\input{crypto_spec} % Aggelos
\input{architecture} % Joe K./Dan
\input{v_and_v} % Joe K./Dan
\input{feasibility} % Poorvi/David J.
\input{conclusion} % Joe K./Susan
\appendix
\input{bon_requirements} %Dan/Joe K.

\printbibliography

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "report"
%%% End:
